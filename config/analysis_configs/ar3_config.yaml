# AR-3: Social Gaze Triplet Analysis Configuration
# Purpose: Detect and compare social gaze triplet patterns across conditions

analysis_name: "AR-3: Social Gaze Triplets"
description: "Analysis of social cognition patterns: person → object → different person gaze sequences"

# Triplet Definition
triplet_definition:
  # Valid triplet patterns (must involve different people)
  valid_patterns:
    - ["man_face", "toy_present", "woman_face"]
    - ["woman_face", "toy_present", "man_face"]

  # Maximum frames between gaze shifts to count as triplet
  max_gap_frames: 2

  # Require consecutive gazes (no intermediate AOIs)
  require_consecutive: true

# Statistical Methods
statistics:
  # Primary test: Generalized Linear Mixed Model (GLMM) for count data
  primary_test: "glmm_poisson"

  # GLMM formula specification
  glmm_formula: "triplet_count ~ condition + (1 | participant)"

  # Distribution family for count data
  family: "poisson"  # or "negative_binomial" if overdispersed

  # Offset for exposure (normalize by trial count)
  use_offset: true
  offset_variable: "log_trial_count"

  # Random effects structure
  random_intercept: true  # Each participant has their own baseline triplet rate

  # Overdispersion check
  check_overdispersion: true  # If true, switch to negative binomial

  # Model diagnostics
  report_aic_bic: true

  # Effect size (rate ratio from GLMM)
  calculate_effect_size: true

# Visualization Settings
visualization:
  # Primary plot type
  plot_type: "bar_with_error_bars"

  # Show distribution of triplet counts
  show_distribution: true
  distribution_plot_type: "histogram"  # or "violin"

  # Colors
  colors:
    - "#9b59b6"  # Purple for GIVE
    - "#1abc9c"  # Teal for HUG

  # Figure dimensions
  figure_width: 8
  figure_height: 6

  # Axis labels
  xlabel: "Experimental Condition"
  ylabel: "Mean Social Gaze Triplets per Trial"

  # Annotate triplet pattern on plot
  show_pattern_diagram: true

# Pattern Analysis
pattern_analysis:
  # Analyze directional bias (man→toy→woman vs woman→toy→man)
  analyze_directional_bias: true

  # Compare first vs second triplet pattern occurrence
  analyze_temporal_order: true

  # Minimum occurrences to analyze pattern separately
  min_pattern_occurrences: 3

# Output Settings
output:
  # Export triplet-level data (each detected triplet)
  export_triplet_data: true

  # Export participant-level summaries
  export_participant_summaries: true

  # Generate pattern diagram (visual representation of triplet)
  generate_pattern_diagram: true

  # Include example triplets in report
  include_examples: true
  n_examples: 3
